<!doctype html>
<html>
	<head>
		<title>Tests</title>

		<script type="text/javascript" src="/builds/browser/es5/jsonrpc.min.js"></script>

		<script>
			var arrErrors = [];

			window.onerror = function(errorMsg, url, lineNumber){
				arrErrors.push([errorMsg, url, lineNumber]);
			};

			var client;
			window.addEventListener(
				"load",
				function(event){
					client = new JSONRPC.Client("http://localhost:8324/api");

					client.rpc("ping", ["Calling from html es5 client."])
						.then(function(result){arrErrors.push(result)})
						.catch(function(error){arrErrors.push(error)})
					;

					if(!console)
						console = {};
					if(!console.log)
						console.log = function(){};
					if(!console.info)
						console.info = console.log;
					if(!console.debug)
						console.debug = console.log;
					if(!console.error)
						console.error = console.log;

					console.info('JSONRPC.Client instantiated as window.client.');
					console.info('Example call: ');
					console.debug('client.rpc("ping", ["Calling from browser ES5 client."]).then(console.log).catch(console.error);');
					console.info('The above command is known to work in at least Internet Explorer 10.');
				}
			);
		</script>
	</head>
	<body>
		Open the developer tools console (F12 for most browsers, CTRL+SHIFT+I in Electron) to see errors or manually make calls.
	</body>
</html>
